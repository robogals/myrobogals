{% extends "base.html" %}

{% block title %}Global workshop reports{% endblock %}

{% block pagetitle %}Global workshop reports{% endblock %}

{% block content %}
<form action="/globalreports/" method="post">
                        {% if theform.errors %}
                                <span class="alert">{{ theform.errors }}</span>
                        {% endif %}
                        <div>
                                <label class="label-left" style="width:120px;" for="id_{{ theform.start_date.name }}">{{ theform.start_date.label }}</label>
                                {{ theform.start_date }} 
                        </div>
                        <div>
                                <label class="label-left" style="width:120px;" for="id_{{ theform.end_date.name }}">{{ theform.end_date.label }}</label>
                                {{ theform.end_date }} 
                        </div>
                        <div>
                                <label class="label-left" style="width:120px;" for="id_{{ theform.visit_type.name }}">{{ theform.visit_type.label }}</label>
                                {{ theform.visit_type }}<br /><span style="font-size: 9pt">{% autoescape off %}{{theform.visit_type.help_text}}{% endautoescape %}</span>
                        </div>
                        <input type="submit" value="Fetch Report">
</form>

{% if warning %}
    <p>{{ warning }}</p>
{% endif %}

{% if chapter_totals %}
	<p><strong>Chapters</strong></p>			
	<table style="text-align: center;" cellpadding="5" border="1" rules="NONE" frame="BOX" cellspacing="0">
		<tr class="even" style="">
			<td>Chapter</td>
			<td>Total Workshops</td>
			<td>Total Unique Schools</td>
			<td>Total Unique Girls</td>
			<td>Total girl-workshops</td>
			<td>Weighted girl-workshops</td>
		</tr>
		{% for name, chapter in chapter_totals %}
		<tr class="{% if forloop.counter|divisibleby:2 %}even{% else %}odd{% endif %}">
			<td>{{ name }}</td>
			<td>{{ chapter.workshops }} </td>
			<td>{{ chapter.schools }}</td>
			<td>{{ chapter.first }}</td>
			<td>{{ chapter.girl_workshops }}</td>
			<td>{{ chapter.weighted }}</td>
		</tr>
		{% endfor %}
	</table>
	<p><strong>Regions</strong></p>	
	<table style="text-align: center;" cellpadding="5" border="1" rules="NONE" frame="BOX" cellspacing="0">
		<tr class="even" style="">
			<td>Region</td>
			<td>Total Workshops</td>
			<td>Total Unique Schools</td>
			<td>Total Unique Girls</td>
			<td>Total girl-workshops</td>
			<td>Weighted girl-workshops</td>
		</tr>
		{% for name, region in region_totals %}
		<tr class="{% if forloop.counter|divisibleby:2 %}even{% else %}odd{% endif %}">
			<td>{{ name }}</td>
			<td>{{ region.workshops }} </td>
			<td>{{ region.schools }}</td>
			<td>{{ region.first }}</td>
			<td>{{ region.girl_workshops }}</td>
			<td>{{ region.weighted }}</td>
		</tr>
		{% endfor %}
		<tr class="{% if region_totals|length|divisibleby:2 %}odd{% else %}even{% endif %}" style="font-weight:bold;">
			<td>Global</td>
			<td>{{ global.workshops }} </td>
			<td>{{ global.schools }}</td>
			<td>{{ global.first }}</td>
			<td>{{ global.girl_workshops }}</td>
			<td>{{ global.weighted }}</td>
		</tr>
	</table>
{% endif %}
{% endblock %}
