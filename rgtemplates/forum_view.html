{% extends "base.html" %}
{% load i18n %}
{% load thous %}
{% block title %}{{chapter.name}}{% endblock %}

{% block pagetitle %}{{chapter.name}}{% endblock %}

{% block content %}
{% if topicform.errors %}
<div class="error">
{% trans "Please correct the following field(s)" %}:<br>
{% for error in topicform.errors %}
- {{error}}<br>
{% endfor %}
</div>
{% endif %}
<p>
	<a href="/forums/{{ chapterHome.myrobogals_url }}/">{% trans "Home" %}</a>
	&raquo;
	{{forum.name}}
</p>

{% if topics.has_previous %}
	<a href="?page={{ topics.previous_page_number }}">{% trans "previous" %}</a> |
{% else %}
	{% trans "previous" %} |
{% endif %}

{% trans "Page" %} {{ topics.number }} {% trans "of" %} {{ topics.paginator.num_pages }}

{% if topics.has_next %}
	| <a href="?page={{ topics.next_page_number }}">{% trans "next" %}</a>
{% else %}
	| {% trans "next" %}
{% endif %}

<table cellpadding="5" border="1" rules="NONE" frame="BOX" cellspacing="0">
	<tr style="color:white; background-color:#1366A3">
		<td>{% trans "Topics" %}</td>
		<td>{% trans "Replies" %}</td>
		<td>{% trans "Views" %}</td>
		<td>{% trans "Last Post" %}</td>
		{% if user.is_superuser %}
		<td>{% trans "Delete" %}</td>
		{% endif %}
	</tr>
	{% for topic in topics.object_list %}
	<tr class="{% if forloop.counter|divisibleby:2 %}even{% else %}odd{% endif %}">
		<td><a href="/forums/{{ chapterHome.myrobogals_url }}/topic/{{ topic.pk }}/">{{ topic.subject }}</a></td>
		<td>{{ topic.num_replies }}</td>
		<td>{{ topic.num_views }}</td>
		<td>{{ topic.last_post|linebreaksbr }}</td>
		{% if user.is_superuser %}
		<td><a href="/forums/topic/delete/{{topic.pk}}/?return={{return|urlencode}}"><img src="{{ MEDIA_URL }}images/delete.gif" alt="Delete" /></a></td>
		{% endif %}
	</tr>
	{% endfor %}
<form action="/forums/newtopic/{{ forum.pk }}/?return={{returnLastPage|urlencode}}" method="POST">
  <tr style="border-top:solid 1px grey;">
    <td valign="top"><strong>{{topicform.subject.label_tag}}</strong></td>
    <td colspan="3">{{ topicform.subject }}</td>
	{% if user.is_superuser %}
	<td></td>
	{% endif %}
  </tr>
  <tr style="border-top:solid 1px grey;">
    <td valign="top"><strong>{{topicform.message.label_tag}}</strong></td>
	<td colspan="3">{{ topicform.message }}</td>
	{% if user.is_superuser %}
	<td></td>
	{% endif %}
  </tr>
  <tr><td colspan="4"><input type="submit" value="add" /></td>
  {% if user.is_superuser %}
  <td></td>
  {% endif %}
  </tr>
</form>
</table>
{% endblock %}
